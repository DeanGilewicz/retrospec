{"version":3,"sources":["main.js"],"names":["domReady","callback","document","readyState","addEventListener","body","querySelector","mobileNavTrigger","closeNavTrigger","navItems","$win","jQuery","window","$winHeight","height","$scrollArrow","$lightboxContainer","$","$loadingIndicator","$lightboxTrigger","$lightboxCloser","ffDataRequested","lightboxContent","debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","updateScrollArrow","scrollTop","hasClass","addClass","removeClass","scrollToTop","scrollDuration","scrollStep","scrollY","scrollInterval","setInterval","scrollBy","clearInterval","getFFpostImgs","urlOrigin","location","origin","postId","attr","split","xhr","XMLHttpRequest","open","onload","status","responseText","send","on","length","classList","add","remove","e","preventDefault","selectedEl","target","closest","selectedSlideNum","parseInt","trigger","response","jsonResponse","JSON","parse","acfImages","acf","images","slideNum","forEach","item","imageSizes","image","sizes","medium_large","html","owlCarousel","items","nav","navText","lazyLoad","dots","startPosition","contains","responsive","768"],"mappings":"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","file":"main.min.js","sourcesContent":["const domReady = callback => {\n\t\"use strict\";\n    if( document.readyState === \"interactive\" || document.readyState === \"complete\" ) { callback(); } else { document.addEventListener(\"DOMContentLoaded\", callback); }\n};\n\ndomReady( () => {\n   \t\"use strict\";\n\n\tconst html = document.querySelector('html');\n\tconst body = document.querySelector('body');\n\tconst mobileNavTrigger = document.querySelector('.nav__trigger');\n\tconst closeNavTrigger = document.querySelector('.mobile__close');\n\tconst navItems = document.querySelector('.nav__items');\n\n\tconst $win = jQuery(window);\n\tconst $winHeight = jQuery($win).height();\n\tconst $scrollArrow = jQuery('.scroll__arrow');\n\n\t// lightbox\n\tconst $lightboxContainer = $('.container__owl__carousel');\n\tconst $loadingIndicator = $('.loading__indicator');\n\tconst $lightbox = $('.js-owl-carousel-lightbox');\n\tconst $lightboxTrigger = $('.js-lightbox-trigger');\n\tconst $lightboxCloser = $('.js-lightbox-close');\n\tlet ffDataRequested = false;\n\tlet lightboxContent = '';\n\n\tconst debounce = function(func, wait, immediate) {\n\t\tvar timeout;\n\t\treturn function() {\n\t\t\tvar context = this, args = arguments;\n\t\t\tvar later = function() {\n\t\t\t\ttimeout = null;\n\t\t\t\tif (!immediate) func.apply(context, args);\n\t\t\t};\n\t\t\tvar callNow = immediate && !timeout;\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t\tif (callNow) func.apply(context, args);\n\t\t};\n\t};\n\n\tconst updateScrollArrow = debounce(function() {\n\t\tif( jQuery($win).scrollTop() >= $winHeight * 1.2 ) {\n\t\t\tif( !jQuery($scrollArrow).hasClass('active') ) {\n\t\t\t\tjQuery($scrollArrow).addClass('active');\n\t\t\t}\n\t\t} else {\n\t\t\tif( jQuery($scrollArrow).hasClass('active') ) {\n\t\t\t\tjQuery($scrollArrow).removeClass('active');\n\t\t\t}\n\t\t}\n\t});\n\n\tconst scrollToTop = function(scrollDuration) {\n\t\tvar scrollStep = -window.scrollY / (scrollDuration / 15),\n\t\tscrollInterval = setInterval(function() {\n\t\t\tif ( window.scrollY != 0 ) {\n\t\t\t\twindow.scrollBy( 0, scrollStep );\n\t\t\t}\n\t\t\telse clearInterval(scrollInterval); \n\t\t}, 15);\n\t};\n\n\n\t// API CALLS\n\n\t// get feature fridat post details\n\tconst getFFpostImgs = function(callback) {\n\t\tlet urlOrigin = window.location.origin;\n\t\tlet postId = $('article').attr('id').split('-')[1];\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.open('GET', urlOrigin+'/wp-json/wp/v2/feature_friday/'+postId);\n\t\txhr.onload = function() {\n\t\t    if (xhr.status === 200) {\n\t\t\t\treturn callback(xhr.responseText);\n\t\t    }\n\t\t    else {\n\t\t\t\treturn callback(xhr.status);\n\t\t    }\n\t\t};\n\t\txhr.send();\n\t};\n\n\n\t// INITIAL PAGE LOAD - Events\n\n\tjQuery($win).on('scroll', updateScrollArrow);\n\n\tif ( $scrollArrow.length ) {\n\t\t$scrollArrow.on('click', function() {\n\t\t\tscrollToTop(1000);\n\t\t});\n\t}\n\n\tif( mobileNavTrigger ) {\n\t\tmobileNavTrigger.addEventListener('click', () => {\n\t\t\tbody.classList.add('no__overflow');\n\t\t\tnavItems.classList.add('active');\n\t\t});\n\t}\n\n\tif( closeNavTrigger ) {\n\t\tcloseNavTrigger.addEventListener('click', () => {\n\t\t\tbody.classList.remove('no__overflow');\n\t\t\tnavItems.classList.remove('active');\n\t\t});\n\t}\n\n\tif( $lightboxTrigger.length ) {\n\t\t$lightboxTrigger.on('click', function(e) {\n\t\t\te.preventDefault();\n\t\t\t// get image slide number to use for lightbox\n\t\t\tlet selectedEl = $(e.target).closest('div[class^=\"slide\"]');\n\t\t\tlet selectedSlideNum = parseInt($(selectedEl).attr('class').split('-')[1], 10);\n\n\t\t\t// hide error message\n\t\t\t$('.lightbox__error').removeClass('active');\n\t\t\t// hide loading state\n\t\t\t$($loadingIndicator).removeClass('active');\t\t\t\n\t\t\t\n\t\t\t// if data has not been requested (or no error previously requesting data) then get data\n\t\t\tif( ! ffDataRequested ) {\n\t\t\t\t// show loading state\n\t\t\t\t$($loadingIndicator).addClass('active');\n\t\t\t\t// display lightbox\n\t\t\t\t$($lightboxContainer).addClass('active');\n\n\t\t\t\t// make api call\n\t\t\t\tgetFFpostImgs(function(response) {\n\t\t\t\t\t// check if 404\n\t\t\t\t\tif( response === 404 ) {\n\t\t\t\t\t\t// close lightbox\n\t\t\t\t\t\t$($lightboxContainer).removeClass('active');\n\t\t\t\t\t\t// show error\n\t\t\t\t\t\t$('.lightbox__error').addClass('active');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t\t// throw new Error({message: 'Oh no we couldn\\'t get the data!'});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// change flag to indicate data fetched - don't need to request it again\n\t\t\t\t\tffDataRequested = true;\n\n\t\t\t\t\tlet jsonResponse = JSON.parse(response);\n\t\t\t\t\tlet acfImages = jsonResponse.acf.images;\n\t\t\t\t\tif( acfImages.length ) {\n\t\t\t\t\t\tlet slideNum = 1;\n\t\t\t\t\t\t// loop through images and build images out for lightbox\n\t\t\t\t\t\tacfImages.forEach(function(item) {\n\t\t\t\t\t\t\tlet imageSizes = item.image.sizes;\n\t\t\t\t\t\t\tlightboxContent += `<div class=\"${slideNum} lightbox__image\" style=\"background-image: url('${imageSizes.medium_large}');\"></div>`;\n\t\t\t\t\t\t\tslideNum++;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// remove loading state\n\t\t\t\t\t$($loadingIndicator).removeClass('active');\n\t\t\t\t\t// set carousel images html\n\t\t\t\t\t$('#js-owl-carousel-lightbox').html(lightboxContent);\n\t\t\t\t\t// add close icon\n\t\t\t\t\t$($lightboxCloser).addClass('active');\n\t\t\t\t\t// initialize lightbox\n\t\t\t\t\tjQuery('#js-owl-carousel-lightbox').owlCarousel({\n\t\t\t\t\t\titems: 1,\n\t\t\t\t\t\tnav: true,\n\t\t\t\t\t\tnavText: ['<span class=\"carousel__prev\">&#x2039;</span>', '<span class=\"carousel__next\">&#x203A;</span>'],\n\t\t\t\t\t\tlazyLoad: true,\n\t\t\t\t\t\tdots: false,\n\t\t\t\t\t\tstartPosition: selectedSlideNum-1\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\t// take slider to the correct slide\n\t\t\t\tjQuery('#js-owl-carousel-lightbox').trigger('to.owl.carousel', selectedSlideNum-1);\n\t\t\t\t// display lightbox\n\t\t\t\t$($lightboxContainer).addClass('active');\n\t\t\t}\n\t\t});\n\t}\n\n\tif( $lightboxCloser.length ) {\n\t\t$lightboxCloser.on('click', function() {\n\t\t\t// hide lightbox\n\t\t\t$($lightboxContainer).removeClass('active');\n\t\t});\n\t}\n\n\t// homepage only\n\tif( document.body.classList.contains('home') ) {\n    \t// JQuery available\n    \tjQuery(\"#js-owl-carousel\").owlCarousel({\n\t\t\titems: 1,\n\t\t\tnav: true,\n\t\t\tnavText: ['<span class=\"carousel__prev\">&#x2039;</span>', '<span class=\"carousel__next\">&#x203A;</span>']\n\t\t});\n\t}\n\n\t// single feature fridays page only\n\tif( document.body.classList.contains('single-feature_friday') ) {\n\t\t// JQuery available\n    \tjQuery(\"#js-owl-carousel-ff\").owlCarousel({\n\t\t\titems: 2,\n\t\t\tnav: true,\n\t\t\tnavText: ['<span class=\"carousel__prev\">&#x2039;</span>', '<span class=\"carousel__next\">&#x203A;</span>'],\n\t\t\tlazyLoad: true,\n\t\t\tdots: false,\n\t\t\tresponsive : {\n\t\t\t\t768: {\n\t\t\t\t\titems: 4,\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\n\t// INITIAL PAGE LOAD - Fire functions\n\n\tupdateScrollArrow();\n\n});"]}